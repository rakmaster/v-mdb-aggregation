(function(j,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(j=typeof globalThis<"u"?globalThis:j||self,e(j.VMongoAggregationBuilder={},j.Vue))})(this,(function(j,e){"use strict";const te=new Set(["$sum","$avg","$min","$max","$count","$first","$last","$push","$addToSet","$stdDevPop","$stdDevSamp"]),ne=new Set(["$addFields","$bucket","$bucketAuto","$changeStream","$changeStreamSplitLargeEvent","$collStats","$count","$currentOp","$densify","$documents","$facet","$fill","$geoNear","$graphLookup","$group","$indexStats","$limit","$listLocalSessions","$listSessions","$lookup","$match","$merge","$out","$planCacheStats","$project","$redact","$replaceRoot","$replaceWith","$sample","$search","$searchMeta","$set","$setWindowFields","$shardedDataDistribution","$skip","$sort","$sortByCount","$unionWith","$unset","$unwind"]);function ae(i){const r={isValid:!0,errors:[],warnings:[]};let t;try{t=JSON.parse(i)}catch(g){return r.isValid=!1,r.errors.push({type:"json",message:`Invalid JSON: ${g instanceof Error?g.message:"Unknown parsing error"}`,position:{line:me(i,g),column:he(i,g)}}),r}return Array.isArray(t)?(t.forEach((g,u)=>{re(g,u,r)}),r.isValid=r.errors.length===0,fe(t,r),r):(r.isValid=!1,r.errors.push({type:"structure",message:"Aggregation pipeline must be an array of stage objects"}),r)}function re(i,r,t){if(typeof i!="object"||i===null||Array.isArray(i)){t.isValid=!1,t.errors.push({type:"structure",message:`Stage ${r+1} must be an object`,position:{stageIndex:r}});return}const g=Object.keys(i);g.length!==1&&(t.isValid=!1,t.errors.push({type:"structure",message:`Stage ${r+1} must have exactly one key (stage name)`,position:{stageIndex:r}}));const u=g[0];if(!u||!u.startsWith("$")){t.isValid=!1,t.errors.push({type:"stage",message:`Stage ${r+1}: Stage name "${u||"undefined"}" must start with $`,position:{stageIndex:r}});return}ne.has(u)||t.warnings.push({type:"compatibility",message:`Stage ${r+1}: Unrecognized stage "${u}" - may not be supported in all MongoDB versions`,position:{stageIndex:r}});const m=i[u];oe(u,m,r,t)}function oe(i,r,t,g){switch(i){case"$match":se(r,t,g);break;case"$group":ie(r,t,g);break;case"$project":case"$addFields":case"$set":le(r,t,g);break;case"$sort":ce(r,t,g);break;case"$limit":case"$skip":ue(r,t,g);break;case"$unwind":pe(r,t,g);break;case"$lookup":de(r,t,g);break;default:ge(r,t,g)}}function se(i,r,t){(typeof i!="object"||i===null)&&t.errors.push({type:"structure",message:`Stage ${r+1} ($match): Must be an object with query conditions`,position:{stageIndex:r}})}function ie(i,r,t){if(typeof i!="object"||i===null){t.errors.push({type:"structure",message:`Stage ${r+1} ($group): Must be an object with _id and accumulator fields`,position:{stageIndex:r}});return}i.hasOwnProperty("_id")||t.errors.push({type:"structure",message:`Stage ${r+1} ($group): Missing required _id field`,position:{stageIndex:r}}),Object.entries(i).forEach(([g,u])=>{if(g!=="_id"&&typeof u=="object"&&u!==null){const m=Object.keys(u);if(m.length>0){const $=m[0];$&&$.startsWith("$")&&!te.has($)&&t.warnings.push({type:"compatibility",message:`Stage ${r+1} ($group): Unrecognized accumulator operator "${$}"`,position:{stageIndex:r}})}}})}function le(i,r,t){(typeof i!="object"||i===null)&&t.errors.push({type:"structure",message:`Stage ${r+1}: Projection stage must be an object mapping field names to expressions`,position:{stageIndex:r}})}function ce(i,r,t){if(typeof i!="object"||i===null){t.errors.push({type:"structure",message:`Stage ${r+1} ($sort): Must be an object mapping field names to sort directions (1 or -1)`,position:{stageIndex:r}});return}Object.entries(i).forEach(([g,u])=>{u!==1&&u!==-1&&t.errors.push({type:"structure",message:`Stage ${r+1} ($sort): Field "${g}" must have sort direction 1 (ascending) or -1 (descending), got ${u}`,position:{stageIndex:r}})})}function ue(i,r,t){(typeof i!="number"||i<0||!Number.isInteger(i))&&t.errors.push({type:"structure",message:`Stage ${r+1}: Must be a non-negative integer`,position:{stageIndex:r}})}function pe(i,r,t){typeof i=="string"?i.startsWith("$")||t.warnings.push({type:"best-practice",message:`Stage ${r+1} ($unwind): Field path should start with $`,position:{stageIndex:r}}):typeof i=="object"&&i!==null?i.path||t.errors.push({type:"structure",message:`Stage ${r+1} ($unwind): Missing required "path" field`,position:{stageIndex:r}}):t.errors.push({type:"structure",message:`Stage ${r+1} ($unwind): Must be a string field path or object with path property`,position:{stageIndex:r}})}function de(i,r,t){if(typeof i!="object"||i===null){t.errors.push({type:"structure",message:`Stage ${r+1} ($lookup): Must be an object with lookup configuration`,position:{stageIndex:r}});return}i.from||t.errors.push({type:"structure",message:`Stage ${r+1} ($lookup): Missing required "from" field`,position:{stageIndex:r}}),i.as||t.errors.push({type:"structure",message:`Stage ${r+1} ($lookup): Missing required "as" field`,position:{stageIndex:r}})}function ge(i,r,t){i==null&&t.errors.push({type:"structure",message:`Stage ${r+1}: Stage value cannot be null or undefined`,position:{stageIndex:r}})}function fe(i,r){const t=i.findIndex(m=>"$match"in m);t>0&&r.warnings.push({type:"performance",message:"Consider moving $match stage earlier in pipeline for better performance",position:{stageIndex:t}}),i.filter(m=>"$sort"in m).length>1&&r.warnings.push({type:"performance",message:"Multiple $sort stages detected - consider combining them",position:{}}),i.map((m,$)=>({stage:m,index:$})).filter(m=>"$limit"in m.stage).forEach(({stage:m,index:$})=>{let s=!1;for(let y=0;y<$;y++)if("$sort"in i[y]){s=!0;break}s||r.warnings.push({type:"best-practice",message:"$limit without preceding $sort may return unpredictable results",position:{stageIndex:$}})})}function me(i,r){if(r instanceof SyntaxError&&"message"in r){const t=r.message.match(/at position (\d+)/);if(t&&t[1]){const g=parseInt(t[1]);return i.substring(0,g).split(`
`).length}}}function he(i,r){if(r instanceof SyntaxError&&"message"in r){const t=r.message.match(/at position (\d+)/);if(t&&t[1]){const g=parseInt(t[1]),u=i.substring(0,g).split(`
`),m=u[u.length-1];return m?m.length:void 0}}}var X=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ye(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var W={exports:{}},Y;function $e(){return Y||(Y=1,(function(i){var r=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};var t=(function(g){var u=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,m=0,$={},s={manual:g.Prism&&g.Prism.manual,disableWorkerMessageHandler:g.Prism&&g.Prism.disableWorkerMessageHandler,util:{encode:function a(n){return n instanceof y?new y(n.type,a(n.content),n.alias):Array.isArray(n)?n.map(a):n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(a){return Object.prototype.toString.call(a).slice(8,-1)},objId:function(a){return a.__id||Object.defineProperty(a,"__id",{value:++m}),a.__id},clone:function a(n,l){l=l||{};var p,d;switch(s.util.type(n)){case"Object":if(d=s.util.objId(n),l[d])return l[d];p={},l[d]=p;for(var f in n)n.hasOwnProperty(f)&&(p[f]=a(n[f],l));return p;case"Array":return d=s.util.objId(n),l[d]?l[d]:(p=[],l[d]=p,n.forEach(function(c,o){p[o]=a(c,l)}),p);default:return n}},getLanguage:function(a){for(;a;){var n=u.exec(a.className);if(n)return n[1].toLowerCase();a=a.parentElement}return"none"},setLanguage:function(a,n){a.className=a.className.replace(RegExp(u,"gi"),""),a.classList.add("language-"+n)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(p){var a=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(p.stack)||[])[1];if(a){var n=document.getElementsByTagName("script");for(var l in n)if(n[l].src==a)return n[l]}return null}},isActive:function(a,n,l){for(var p="no-"+n;a;){var d=a.classList;if(d.contains(n))return!0;if(d.contains(p))return!1;a=a.parentElement}return!!l}},languages:{plain:$,plaintext:$,text:$,txt:$,extend:function(a,n){var l=s.util.clone(s.languages[a]);for(var p in n)l[p]=n[p];return l},insertBefore:function(a,n,l,p){p=p||s.languages;var d=p[a],f={};for(var c in d)if(d.hasOwnProperty(c)){if(c==n)for(var o in l)l.hasOwnProperty(o)&&(f[o]=l[o]);l.hasOwnProperty(c)||(f[c]=d[c])}var h=p[a];return p[a]=f,s.languages.DFS(s.languages,function(w,N){N===h&&w!=a&&(this[w]=f)}),f},DFS:function a(n,l,p,d){d=d||{};var f=s.util.objId;for(var c in n)if(n.hasOwnProperty(c)){l.call(n,c,n[c],p||c);var o=n[c],h=s.util.type(o);h==="Object"&&!d[f(o)]?(d[f(o)]=!0,a(o,l,null,d)):h==="Array"&&!d[f(o)]&&(d[f(o)]=!0,a(o,l,c,d))}}},plugins:{},highlightAll:function(a,n){s.highlightAllUnder(document,a,n)},highlightAllUnder:function(a,n,l){var p={callback:l,container:a,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};s.hooks.run("before-highlightall",p),p.elements=Array.prototype.slice.apply(p.container.querySelectorAll(p.selector)),s.hooks.run("before-all-elements-highlight",p);for(var d=0,f;f=p.elements[d++];)s.highlightElement(f,n===!0,p.callback)},highlightElement:function(a,n,l){var p=s.util.getLanguage(a),d=s.languages[p];s.util.setLanguage(a,p);var f=a.parentElement;f&&f.nodeName.toLowerCase()==="pre"&&s.util.setLanguage(f,p);var c=a.textContent,o={element:a,language:p,grammar:d,code:c};function h(N){o.highlightedCode=N,s.hooks.run("before-insert",o),o.element.innerHTML=o.highlightedCode,s.hooks.run("after-highlight",o),s.hooks.run("complete",o),l&&l.call(o.element)}if(s.hooks.run("before-sanity-check",o),f=o.element.parentElement,f&&f.nodeName.toLowerCase()==="pre"&&!f.hasAttribute("tabindex")&&f.setAttribute("tabindex","0"),!o.code){s.hooks.run("complete",o),l&&l.call(o.element);return}if(s.hooks.run("before-highlight",o),!o.grammar){h(s.util.encode(o.code));return}if(n&&g.Worker){var w=new Worker(s.filename);w.onmessage=function(N){h(N.data)},w.postMessage(JSON.stringify({language:o.language,code:o.code,immediateClose:!0}))}else h(s.highlight(o.code,o.grammar,o.language))},highlight:function(a,n,l){var p={code:a,grammar:n,language:l};if(s.hooks.run("before-tokenize",p),!p.grammar)throw new Error('The language "'+p.language+'" has no grammar.');return p.tokens=s.tokenize(p.code,p.grammar),s.hooks.run("after-tokenize",p),y.stringify(s.util.encode(p.tokens),p.language)},tokenize:function(a,n){var l=n.rest;if(l){for(var p in l)n[p]=l[p];delete n.rest}var d=new A;return C(d,d.head,a),E(a,d,n,d.head,0),F(d)},hooks:{all:{},add:function(a,n){var l=s.hooks.all;l[a]=l[a]||[],l[a].push(n)},run:function(a,n){var l=s.hooks.all[a];if(!(!l||!l.length))for(var p=0,d;d=l[p++];)d(n)}},Token:y};g.Prism=s;function y(a,n,l,p){this.type=a,this.content=n,this.alias=l,this.length=(p||"").length|0}y.stringify=function a(n,l){if(typeof n=="string")return n;if(Array.isArray(n)){var p="";return n.forEach(function(h){p+=a(h,l)}),p}var d={type:n.type,content:a(n.content,l),tag:"span",classes:["token",n.type],attributes:{},language:l},f=n.alias;f&&(Array.isArray(f)?Array.prototype.push.apply(d.classes,f):d.classes.push(f)),s.hooks.run("wrap",d);var c="";for(var o in d.attributes)c+=" "+o+'="'+(d.attributes[o]||"").replace(/"/g,"&quot;")+'"';return"<"+d.tag+' class="'+d.classes.join(" ")+'"'+c+">"+d.content+"</"+d.tag+">"};function v(a,n,l,p){a.lastIndex=n;var d=a.exec(l);if(d&&p&&d[1]){var f=d[1].length;d.index+=f,d[0]=d[0].slice(f)}return d}function E(a,n,l,p,d,f){for(var c in l)if(!(!l.hasOwnProperty(c)||!l[c])){var o=l[c];o=Array.isArray(o)?o:[o];for(var h=0;h<o.length;++h){if(f&&f.cause==c+","+h)return;var w=o[h],N=w.inside,D=!!w.lookbehind,B=!!w.greedy,G=w.alias;if(B&&!w.pattern.global){var L=w.pattern.toString().match(/[imsuy]*$/)[0];w.pattern=RegExp(w.pattern.source,L+"g")}for(var z=w.pattern||w,V=p.next,k=d;V!==n.tail&&!(f&&k>=f.reach);k+=V.value.length,V=V.next){var T=V.value;if(n.length>a.length)return;if(!(T instanceof y)){var J=1,O;if(B){if(O=v(z,k,a,D),!O||O.index>=a.length)break;var U=O.index,Pe=O.index+O[0].length,P=k;for(P+=V.value.length;U>=P;)V=V.next,P+=V.value.length;if(P-=V.value.length,k=P,V.value instanceof y)continue;for(var M=V;M!==n.tail&&(P<Pe||typeof M.value=="string");M=M.next)J++,P+=M.value.length;J--,T=a.slice(k,P),O.index-=k}else if(O=v(z,0,T,D),!O)continue;var U=O.index,q=O[0],I=T.slice(0,U),ee=T.slice(U+q.length),H=k+T.length;f&&H>f.reach&&(f.reach=H);var R=V.prev;I&&(R=C(n,R,I),k+=I.length),x(n,R,J);var je=new y(c,N?s.tokenize(q,N):q,G,q);if(V=C(n,R,je),ee&&C(n,V,ee),J>1){var Z={cause:c+","+h,reach:H};E(a,n,l,V.prev,k,Z),f&&Z.reach>f.reach&&(f.reach=Z.reach)}}}}}}function A(){var a={value:null,prev:null,next:null},n={value:null,prev:a,next:null};a.next=n,this.head=a,this.tail=n,this.length=0}function C(a,n,l){var p=n.next,d={value:l,prev:n,next:p};return n.next=d,p.prev=d,a.length++,d}function x(a,n,l){for(var p=n.next,d=0;d<l&&p!==a.tail;d++)p=p.next;n.next=p,p.prev=n,a.length-=d}function F(a){for(var n=[],l=a.head.next;l!==a.tail;)n.push(l.value),l=l.next;return n}if(!g.document)return g.addEventListener&&(s.disableWorkerMessageHandler||g.addEventListener("message",function(a){var n=JSON.parse(a.data),l=n.language,p=n.code,d=n.immediateClose;g.postMessage(s.highlight(p,s.languages[l],l)),d&&g.close()},!1)),s;var _=s.util.currentScript();_&&(s.filename=_.src,_.hasAttribute("data-manual")&&(s.manual=!0));function b(){s.manual||s.highlightAll()}if(!s.manual){var S=document.readyState;S==="loading"||S==="interactive"&&_&&_.defer?document.addEventListener("DOMContentLoaded",b):window.requestAnimationFrame?window.requestAnimationFrame(b):window.setTimeout(b,16)}return s})(r);i.exports&&(i.exports=t),typeof X<"u"&&(X.Prism=t),t.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},t.languages.markup.tag.inside["attr-value"].inside.entity=t.languages.markup.entity,t.languages.markup.doctype.inside["internal-subset"].inside=t.languages.markup,t.hooks.add("wrap",function(g){g.type==="entity"&&(g.attributes.title=g.content.replace(/&amp;/,"&"))}),Object.defineProperty(t.languages.markup.tag,"addInlined",{value:function(u,m){var $={};$["language-"+m]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:t.languages[m]},$.cdata=/^<!\[CDATA\[|\]\]>$/i;var s={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:$}};s["language-"+m]={pattern:/[\s\S]+/,inside:t.languages[m]};var y={};y[u]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return u}),"i"),lookbehind:!0,greedy:!0,inside:s},t.languages.insertBefore("markup","cdata",y)}}),Object.defineProperty(t.languages.markup.tag,"addAttribute",{value:function(g,u){t.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+g+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[u,"language-"+u],inside:t.languages[u]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),t.languages.html=t.languages.markup,t.languages.mathml=t.languages.markup,t.languages.svg=t.languages.markup,t.languages.xml=t.languages.extend("markup",{}),t.languages.ssml=t.languages.xml,t.languages.atom=t.languages.xml,t.languages.rss=t.languages.xml,(function(g){var u=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;g.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+u.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+u.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+u.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+u.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:u,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},g.languages.css.atrule.inside.rest=g.languages.css;var m=g.languages.markup;m&&(m.tag.addInlined("style","css"),m.tag.addAttribute("style","css"))})(t),t.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},t.languages.javascript=t.languages.extend("clike",{"class-name":[t.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),t.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,t.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:t.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:t.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:t.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:t.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:t.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),t.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:t.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),t.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),t.languages.markup&&(t.languages.markup.tag.addInlined("script","javascript"),t.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),t.languages.js=t.languages.javascript,(function(){if(typeof t>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var g="Loading…",u=function(_,b){return"✖ Error "+_+" while fetching file: "+b},m="✖ Error: File does not exist or is empty",$={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},s="data-src-status",y="loading",v="loaded",E="failed",A="pre[data-src]:not(["+s+'="'+v+'"]):not(['+s+'="'+y+'"])';function C(_,b,S){var a=new XMLHttpRequest;a.open("GET",_,!0),a.onreadystatechange=function(){a.readyState==4&&(a.status<400&&a.responseText?b(a.responseText):a.status>=400?S(u(a.status,a.statusText)):S(m))},a.send(null)}function x(_){var b=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(_||"");if(b){var S=Number(b[1]),a=b[2],n=b[3];return a?n?[S,Number(n)]:[S,void 0]:[S,S]}}t.hooks.add("before-highlightall",function(_){_.selector+=", "+A}),t.hooks.add("before-sanity-check",function(_){var b=_.element;if(b.matches(A)){_.code="",b.setAttribute(s,y);var S=b.appendChild(document.createElement("CODE"));S.textContent=g;var a=b.getAttribute("data-src"),n=_.language;if(n==="none"){var l=(/\.(\w+)$/.exec(a)||[,"none"])[1];n=$[l]||l}t.util.setLanguage(S,n),t.util.setLanguage(b,n);var p=t.plugins.autoloader;p&&p.loadLanguages(n),C(a,function(d){b.setAttribute(s,v);var f=x(b.getAttribute("data-range"));if(f){var c=d.split(/\r\n?|\n/g),o=f[0],h=f[1]==null?c.length:f[1];o<0&&(o+=c.length),o=Math.max(0,Math.min(o-1,c.length)),h<0&&(h+=c.length),h=Math.max(0,Math.min(h,c.length)),d=c.slice(o,h).join(`
`),b.hasAttribute("data-start")||b.setAttribute("data-start",String(o+1))}S.textContent=d,t.highlightElement(S)},function(d){b.setAttribute(s,E),S.textContent=d})}}),t.plugins.fileHighlight={highlight:function(b){for(var S=(b||document).querySelectorAll(A),a=0,n;n=S[a++];)t.highlightElement(n)}};var F=!1;t.fileHighlight=function(){F||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),F=!0),t.plugins.fileHighlight.highlight.apply(this,arguments)}})()})(W)),W.exports}var be=$e();const we=ye(be);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}},Prism.languages.webmanifest=Prism.languages.json;const ve={class:"v-syntax-highlighted-textarea"},xe={class:"v-syntax-highlighted-code"},Se={class:"language-json"},_e=["textContent"],K=e.defineComponent({__name:"JsonTextarea",props:{modelValue:{},placeholder:{default:""},rows:{default:10},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},textareaClass:{default:""}},emits:["update:modelValue"],setup(i,{emit:r}){const t=i,g=r,u=e.ref(t.modelValue),m=e.computed(()=>{try{const y=JSON.parse(u.value||"{}");return JSON.stringify(y,null,2)}catch{return u.value||""}});e.watch(()=>t.modelValue,y=>{u.value=y}),e.watch(u,y=>{g("update:modelValue",y)});const $=y=>{const v=y.target,E=v.parentElement?.querySelector(".v-syntax-highlighted-code");E&&(E.scrollTop=v.scrollTop,E.scrollLeft=v.scrollLeft)},s=y=>{const v=y.target;u.value=v.textContent||""};return e.watch(m,()=>{e.nextTick(()=>{we.highlightAll()})},{immediate:!0}),(y,v)=>(e.openBlock(),e.createElementBlock("div",ve,[e.createElementVNode("pre",xe,[e.createElementVNode("code",Se,e.toDisplayString(m.value),1)]),e.createElementVNode("div",{contenteditable:"true",class:e.normalizeClass(["v-syntax-textarea",i.textareaClass]),onInput:s,onScroll:$,spellcheck:"false",textContent:e.toDisplayString(u.value)},null,42,_e)]))}}),ke={class:"stage-number"},Ce={class:"preview-box"},Fe={class:"preview-box-content"},Ae=e.defineComponent({__name:"VStageCard",props:{stage:{},index:{},totalStages:{}},emits:["update","delete","move-up","move-down"],setup(i,{emit:r}){const t=i,g=r,u=e.ref(""),m=e.ref(""),$=e.ref([]),s=[{title:"$match",value:"$match"},{title:"$group",value:"$group"},{title:"$project",value:"$project"},{title:"$sort",value:"$sort"},{title:"$limit",value:"$limit"},{title:"$skip",value:"$skip"},{title:"$count",value:"$count"},{title:"$unwind",value:"$unwind"},{title:"$lookup",value:"$lookup"},{title:"$addFields",value:"$addFields"},{title:"$set",value:"$set"},{title:"$unset",value:"$unset"},{title:"$replaceRoot",value:"$replaceRoot"},{title:"$facet",value:"$facet"},{title:"$bucket",value:"$bucket"},{title:"$bucketAuto",value:"$bucketAuto"},{title:"$sortByCount",value:"$sortByCount"},{title:"$graphLookup",value:"$graphLookup"},{title:"$unionWith",value:"$unionWith"},{title:"$search",value:"$search"},{title:"$searchMeta",value:"$searchMeta"},{title:"$out",value:"$out"},{title:"$merge",value:"$merge"}],y=e.computed(()=>$.value.length>0),v=e.computed(()=>{try{return JSON.parse(m.value)}catch{return null}}),E=C=>{try{const x=JSON.parse(m.value),F={[C]:x[Object.keys(x)[0]]||{}};m.value=JSON.stringify(F,null,2),A()}catch{const x={[C]:{}};m.value=JSON.stringify(x,null,2),A()}},A=()=>{try{const C=JSON.parse(m.value);g("update",t.index,C)}catch{$.value=["Invalid JSON syntax"]}};return e.watch(()=>t.stage,C=>{u.value=Object.keys(C)[0]||"",m.value=JSON.stringify(C,null,2),$.value=[]},{immediate:!0}),e.watch(m,()=>{$.value=[],A()}),(C,x)=>{const F=e.resolveComponent("v-col"),_=e.resolveComponent("v-chip"),b=e.resolveComponent("v-select"),S=e.resolveComponent("v-btn"),a=e.resolveComponent("v-btn-group"),n=e.resolveComponent("v-row"),l=e.resolveComponent("v-expansion-panel-title"),p=e.resolveComponent("v-alert"),d=e.resolveComponent("v-expansion-panel-text"),f=e.resolveComponent("v-expansion-panel");return e.openBlock(),e.createBlock(f,null,{default:e.withCtx(()=>[e.createVNode(l,null,{default:e.withCtx(()=>[e.createVNode(n,{align:"center"},{default:e.withCtx(()=>[e.createVNode(F,{cols:"auto"},{default:e.withCtx(()=>[e.createElementVNode("span",ke,"Stage "+e.toDisplayString(i.index+1),1)]),_:1}),e.createVNode(F,{cols:"auto"},{default:e.withCtx(()=>[e.createVNode(_,{size:"small",color:"primary",variant:"outlined"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(u.value||"Select Type"),1)]),_:1})]),_:1}),e.createVNode(F,null,{default:e.withCtx(()=>[e.createVNode(b,{modelValue:u.value,"onUpdate:modelValue":[x[0]||(x[0]=c=>u.value=c),E],items:s,label:"Stage Type",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e.createVNode(F,{cols:"auto"},{default:e.withCtx(()=>[e.createVNode(a,null,{default:e.withCtx(()=>[i.index>0?(e.openBlock(),e.createBlock(S,{key:0,icon:"mdi-arrow-up",size:"small",variant:"text",onClick:x[1]||(x[1]=e.withModifiers(c=>C.$emit("move-up",i.index),["stop"]))})):e.createCommentVNode("",!0),i.index<i.totalStages-1?(e.openBlock(),e.createBlock(S,{key:1,icon:"mdi-arrow-down",size:"small",variant:"text",onClick:x[2]||(x[2]=e.withModifiers(c=>C.$emit("move-down",i.index),["stop"]))})):e.createCommentVNode("",!0),e.createVNode(S,{icon:"mdi-delete-outline",size:"small",color:"error",variant:"text",onClick:x[3]||(x[3]=e.withModifiers(c=>C.$emit("delete",i.index),["stop"]))})]),_:1})]),_:1})]),_:1})]),_:1}),e.createVNode(d,null,{default:e.withCtx(()=>[y.value?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList($.value,c=>(e.openBlock(),e.createBlock(p,{key:c,type:"error",density:"compact",class:"mb-1"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(c),1)]),_:2},1024))),128)):e.createCommentVNode("",!0),e.createVNode(n,null,{default:e.withCtx(()=>[e.createVNode(F,{cols:"12",md:"8"},{default:e.withCtx(()=>[e.createVNode(K,{modelValue:m.value,"onUpdate:modelValue":x[4]||(x[4]=c=>m.value=c),class:e.normalizeClass({"text-error":y.value}),label:"Stage Configuration (JSON)",placeholder:'{"$match": {"status": "active"}}',rows:8},null,8,["modelValue","class"])]),_:1}),e.createVNode(F,{cols:"12",md:"4"},{default:e.withCtx(()=>[e.createElementVNode("div",Ce,[x[5]||(x[5]=e.createElementVNode("div",{class:"preview-box-label"}," Preview ",-1)),e.createElementVNode("div",Fe,[e.createElementVNode("pre",null,e.toDisplayString(JSON.stringify(v.value,null,2)),1)])])]),_:1})]),_:1})]),_:1})]),_:1})}}}),Q=(i,r)=>{const t=i.__vccOpts||i;for(const[g,u]of r)t[g]=u;return t},Ve=Q(Ae,[["__scopeId","data-v-d84dc298"]]),Ee=Q(e.defineComponent({__name:"VOutputPanel",props:{pipeline:{}},emits:["export"],setup(i,{emit:r}){const t=i,g=e.ref("json"),u=e.computed(()=>JSON.stringify(t.pipeline,null,2)),m=e.computed(()=>`db.collection.aggregate(${JSON.stringify(t.pipeline,null,2)})`);return($,s)=>{const y=e.resolveComponent("v-spacer"),v=e.resolveComponent("v-btn"),E=e.resolveComponent("v-card-title"),A=e.resolveComponent("v-tab"),C=e.resolveComponent("v-tabs"),x=e.resolveComponent("v-window-item"),F=e.resolveComponent("v-window"),_=e.resolveComponent("v-card-text"),b=e.resolveComponent("v-card"),S=e.resolveComponent("v-col"),a=e.resolveComponent("v-row");return e.openBlock(),e.createBlock(a,null,{default:e.withCtx(()=>[e.createVNode(S,null,{default:e.withCtx(()=>[e.createVNode(b,null,{default:e.withCtx(()=>[e.createVNode(E,{class:"d-flex align-center"},{default:e.withCtx(()=>[s[4]||(s[4]=e.createElementVNode("span",null,"Output",-1)),e.createVNode(y),e.createVNode(v,{onClick:s[0]||(s[0]=n=>$.$emit("export")),size:"small"},{default:e.withCtx(()=>[...s[3]||(s[3]=[e.createTextVNode(" Export ",-1)])]),_:1})]),_:1}),e.createVNode(_,null,{default:e.withCtx(()=>[e.createVNode(C,{modelValue:g.value,"onUpdate:modelValue":s[1]||(s[1]=n=>g.value=n),color:"primary"},{default:e.withCtx(()=>[e.createVNode(A,{value:"json"},{default:e.withCtx(()=>[...s[5]||(s[5]=[e.createTextVNode("JSON",-1)])]),_:1}),e.createVNode(A,{value:"query"},{default:e.withCtx(()=>[...s[6]||(s[6]=[e.createTextVNode("Query",-1)])]),_:1})]),_:1},8,["modelValue"]),e.createVNode(F,{modelValue:g.value,"onUpdate:modelValue":s[2]||(s[2]=n=>g.value=n),class:"mt-4"},{default:e.withCtx(()=>[e.createVNode(x,{value:"json"},{default:e.withCtx(()=>[e.createElementVNode("pre",null,e.toDisplayString(u.value),1)]),_:1}),e.createVNode(x,{value:"query"},{default:e.withCtx(()=>[e.createElementVNode("pre",null,e.toDisplayString(m.value),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-b28ddba9"]]),Ne={key:0,class:"validation-errors mt-2"},Oe={class:"d-flex align-center mb-2"},Te=e.defineComponent({__name:"VMongoAggregationBuilder",props:{initialPipeline:{default:()=>[]}},emits:["pipelineChange","exportPipeline"],setup(i,{emit:r}){const t=i,g=r,u=e.ref(t.initialPipeline||[]),m=e.ref("stages"),$=e.ref(""),s=e.ref([]),y=e.computed(()=>s.value.length>0),v=e.ref(t.initialPipeline?t.initialPipeline.map((c,o)=>o):[]),E=e.ref(JSON.stringify(t.initialPipeline||[],null,2)),A=e.computed(()=>JSON.stringify(u.value,null,2));e.watch(u,()=>{m.value==="text"&&(E.value=A.value)},{deep:!0});const C=[{title:"Stages View",value:"stages"},{title:"Text View",value:"text"}],x=()=>{g("exportPipeline",u.value)},F=()=>{g("pipelineChange",u.value)},_=()=>{u.value.length,u.value.push({$match:{status:"active"}}),F()},b=()=>{v.value=u.value.map((c,o)=>o)},S=()=>{v.value=[]},a=c=>{u.value.splice(c,1),v.value=v.value.filter(o=>o!==c).map(o=>o>c?o-1:o),f(A.value),F()},n=(c,o)=>{u.value[c]=o,f(A.value),F()},l=c=>{if(c>0){[u.value[c-1],u.value[c]]=[u.value[c],u.value[c-1]];const o=[...v.value],h=o.indexOf(c),w=o.indexOf(c-1);h!==-1&&(o[h]=c-1),w!==-1&&(o[w]=c),v.value=o,f(A.value),F()}},p=c=>{if(c<u.value.length-1){[u.value[c],u.value[c+1]]=[u.value[c+1],u.value[c]];const o=[...v.value],h=o.indexOf(c),w=o.indexOf(c+1);h!==-1&&(o[h]=c+1),w!==-1&&(o[w]=c),v.value=o,f(A.value),F()}},d=()=>{f(E.value)},f=c=>{if(s.value=[],!!c.trim())try{const o=JSON.parse(c);if(!Array.isArray(o)){s.value.push("Aggregation pipeline must be an array of stage objects");return}const h=ae(c);h.isValid||(s.value=h.errors.map(w=>w.message)),h.warnings.length>0&&h.warnings.forEach(w=>{s.value.push(`Warning: ${w.message}`)})}catch{s.value=["Invalid JSON syntax"]}};return(c,o)=>{const h=e.resolveComponent("v-btn"),w=e.resolveComponent("v-btn-toggle"),N=e.resolveComponent("v-spacer"),D=e.resolveComponent("v-toolbar"),B=e.resolveComponent("v-alert"),G=e.resolveComponent("v-expansion-panels"),L=e.resolveComponent("v-col"),z=e.resolveComponent("v-row"),V=e.resolveComponent("v-sheet");return e.openBlock(),e.createBlock(V,null,{default:e.withCtx(()=>[e.createVNode(z,null,{default:e.withCtx(()=>[e.createVNode(L,{cols:"12",md:"8"},{default:e.withCtx(()=>[e.renderSlot(c.$slots,"toolbar",{stages:u.value,viewMode:m.value,addStage:_,expandAllStages:b,collapseAllStages:S,exportPipeline:x,viewModeOptions:C},()=>[e.createVNode(D,null,{default:e.withCtx(()=>[e.renderSlot(c.$slots,"toolbar-prepend"),e.createVNode(h,{onClick:_,class:"mx-3"},{default:e.withCtx(()=>[...o[3]||(o[3]=[e.createTextVNode(" Add Stage ",-1)])]),_:1}),e.createVNode(w,{modelValue:m.value,"onUpdate:modelValue":o[0]||(o[0]=k=>m.value=k),label:"View Mode"},{default:e.withCtx(()=>[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(C,k=>e.createVNode(h,{key:k.value,value:k.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(k.title),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"]),e.createVNode(N),m.value==="stages"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(h,{onClick:b,icon:"mdi-chevron-down"}),e.createVNode(h,{onClick:S,icon:"mdi-chevron-up"})],64)):e.createCommentVNode("",!0),e.renderSlot(c.$slots,"toolbar-append")]),_:3})]),e.renderSlot(c.$slots,"validation",{errors:s.value,hasErrors:y.value,error:$.value},()=>[y.value?(e.openBlock(),e.createElementBlock("div",Ne,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,k=>(e.openBlock(),e.createBlock(B,{key:k,type:"error",density:"compact",class:"mb-1"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(k),1)]),_:2},1024))),128))])):e.createCommentVNode("",!0),$.value?(e.openBlock(),e.createBlock(B,{key:1,type:"error",class:"mt-4"},{default:e.withCtx(()=>[o[4]||(o[4]=e.createElementVNode("strong",null,"Error:",-1)),e.createTextVNode(" "+e.toDisplayString($.value),1)]),_:1})):e.createCommentVNode("",!0)]),m.value==="stages"?(e.openBlock(),e.createBlock(G,{key:0,modelValue:v.value,"onUpdate:modelValue":o[1]||(o[1]=k=>v.value=k),multiple:""},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(u.value,(k,T)=>(e.openBlock(),e.createBlock(Ve,{key:T,stage:k,index:T,"total-stages":u.value.length,onUpdate:n,onDelete:a,onMoveUp:l,onMoveDown:p},null,8,["stage","index","total-stages"]))),128))]),_:1},8,["modelValue"])):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createElementVNode("div",Oe,[e.createVNode(N),e.createVNode(h,{size:"small",onClick:d,color:"primary",variant:"outlined"},{default:e.withCtx(()=>[...o[5]||(o[5]=[e.createTextVNode(" Validate ",-1)])]),_:1})]),e.createVNode(K,{modelValue:E.value,"onUpdate:modelValue":o[2]||(o[2]=k=>E.value=k),class:e.normalizeClass({"text-error":y.value}),label:"Aggregation Pipeline JSON",placeholder:"Paste your aggregation pipeline JSON here...",rows:15},null,8,["modelValue","class"])],64))]),_:3}),e.createVNode(L,{cols:"12",md:"4"},{default:e.withCtx(()=>[e.createVNode(Ee,{pipeline:u.value,onExport:x},null,8,["pipeline"]),e.renderSlot(c.$slots,"output",{pipeline:u.value})]),_:3})]),_:3})]),_:3})}}});j.VMongoAggregationBuilder=Te,Object.defineProperty(j,Symbol.toStringTag,{value:"Module"})}));
